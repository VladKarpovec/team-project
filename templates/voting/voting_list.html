{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2>–û–ø–∏—Ç—É–≤–∞–Ω–Ω—è</h2>

  {% if request.user.is_authenticated %}
    {% if request.user.is_staff %}
      <a href="{% url 'voting:create_voting' %}" class="btn btn-success mb-3">‚ûï –°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è</a>
    {% endif %}
  {% else %}
    <div class="alert alert-warning mb-3">
    üîí –í–∞–º –≤–∞—Ä—Ç–æ <a href="{% url 'register:login' %}">—É–≤—ñ–π—Ç–∏</a> –∞–±–æ <a href="{% url 'register:register' %}">–∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</a>, —â–æ–± –ø—Ä–æ—Ö–æ–¥–∏—Ç–∏ –≥–æ–ª–æ—Å—É–≤–∞–Ω–Ω—è.
    </div>
  {% endif %}

  <ul class="list-group">
    {% for poll in polls %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <a href="{% url 'voting:voting_detail' poll.id %}">{{ poll.question }}</a>
        <span class="badge bg-primary">{{ poll.choices.count }} –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤</span>

        {% if request.user.is_authenticated and request.user.is_superuser %}
          <div class="btn-group">
            <a href="{% url 'voting:edit_voting' poll.id %}" class="btn btn-warning btn-sm">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
            <a href="{% url 'voting:delete_voting' poll.id %}" class="btn btn-danger btn-sm">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</a>
          </div>
        {% endif %}
      </li>
    {% empty %}
      <li class="list-group-item">–ù–∞—Ä–∞–∑—ñ –Ω–µ–º–∞—î –æ–ø–∏—Ç—É–≤–∞–Ω—å.</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}