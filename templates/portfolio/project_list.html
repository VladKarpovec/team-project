{% extends "base.html" %}
{% block title %}–ú–æ—ó –ø—Ä–æ—î–∫—Ç–∏{% endblock %}

{% block content %}
<h2 class="mb-4">–ú–æ—ó –ø—Ä–æ—î–∫—Ç–∏</h2>

{% if request.user.is_authenticated %}
  <a href="{% url 'portfolio:project_create' %}" class="btn btn-success mb-3">‚ûï –î–æ–¥–∞—Ç–∏ –ø—Ä–æ—î–∫—Ç</a>
{% else %}
  <div class="alert alert-warning mb-3">
    üîí –í–∞–º –≤–∞—Ä—Ç–æ <a href="{% url 'register:login' %}">—É–≤—ñ–π—Ç–∏</a> –∞–±–æ <a href="{% url 'register:register' %}">–∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</a>, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ—Ä—Ç—Ñ–æ–ª—ñ–æ.
  </div>
{% endif %}

{% for project in projects %}
  <div class="card mb-4 shadow-sm">
    {% if project.screenshot %}
      <img src="{{ project.screenshot.url }}" class="card-img-top" alt="–°–∫—Ä—ñ–Ω—à–æ—Ç">
    {% endif %}
    <div class="card-body">
      <h5 class="card-title">{{ project.title }}</h5>
      <p class="card-text">{{ project.description|linebreaks }}</p>

      <div class="d-flex flex-wrap gap-2">
        {% if project.link %}
          <a href="{{ project.link }}" class="btn btn-outline-primary" target="_blank">üîó –ü–µ—Ä–µ–π—Ç–∏</a>
        {% endif %}
        {% if project.file %}
          <a href="{{ project.file.url }}" class="btn btn-outline-secondary">üìé –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª</a>
        {% endif %}

        {% if request.user.is_authenticated and project.owner == request.user %}
          <a href="{% url 'portfolio:project_update' project.pk %}" class="btn btn-warning">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
          <a href="{% url 'portfolio:project_delete' project.pk %}" class="btn btn-danger">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</a>
        {% endif %}
      </div>
    </div>
  </div>

  <p>–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î –ø—Ä–æ—î–∫—Ç—ñ–≤. –ü–æ—á–Ω—ñ—Ç—å –∑ <a href="{% url 'portfolio:project_create' %}">–¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø–µ—Ä—à–æ–≥–æ</a>.</p>
{% empty %}
{% endfor %}
{% endblock %}